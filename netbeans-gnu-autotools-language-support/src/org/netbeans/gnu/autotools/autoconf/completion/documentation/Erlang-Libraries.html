<html lang="en">
    <head>
        <title>Erlang Libraries - Autoconf</title>
        <meta http-equiv="Content-Type" content="text/html">
        <meta name="description" content="Autoconf">
        <meta name="generator" content="makeinfo 4.13">
        <link title="Top" rel="start" href="index.html#Top">
        <link rel="up" href="Existing-Tests.html#Existing-Tests" title="Existing Tests">
        <link rel="prev" href="Posix-Variants.html#Posix-Variants" title="Posix Variants">
        <link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
        <!--
        This manual (24 April 2012) is for GNU Autoconf
        (version 2.69),
        a package for creating scripts to configure source code packages using
        templates and an M4 macro package.
        
        Copyright (C) 1992-1996, 1998-2012 Free Software Foundation,
        Inc.
        
             Permission is granted to copy, distribute and/or modify this
             document under the terms of the GNU Free Documentation License,
             Version 1.3 or any later version published by the Free Software
             Foundation; with no Invariant Sections, no Front-Cover texts, and
             no Back-Cover Texts.  A copy of the license is included in the
             section entitled ``GNU Free Documentation License.''
        -->
        <meta http-equiv="Content-Style-Type" content="text/css">
        <style type="text/css"><!--
            pre.display { font-family:inherit }
            pre.format  { font-family:inherit }
            pre.smalldisplay { font-family:inherit; font-size:smaller }
            pre.smallformat  { font-family:inherit; font-size:smaller }
            pre.smallexample { font-size:smaller }
            pre.smalllisp    { font-size:smaller }
            span.sc    { font-variant:small-caps }
            span.roman { font-family:serif; font-weight:normal; } 
            span.sansserif { font-family:sans-serif; font-weight:normal; } 
            --></style>
    </head>
    <body>
        <div class="node">
            <a name="Erlang-Libraries"></a>
            <p>
                Previous:&nbsp;<a rel="previous" accesskey="p" href="Posix-Variants.html#Posix-Variants">Posix Variants</a>,
                Up:&nbsp;<a rel="up" accesskey="u" href="Existing-Tests.html#Existing-Tests">Existing Tests</a>
            <hr>
        </div>

        <h3 class="section">5.13 Erlang Libraries</h3>

        <p><a name="index-Erlang_002c-Library_002c-checking-1127"></a>
            The following macros check for an installation of Erlang/OTP, and for the
            presence of certain Erlang libraries.  All those macros require the
            configuration of an Erlang interpreter and an Erlang compiler
            (see <a href="Erlang-Compiler-and-Interpreter.html#Erlang-Compiler-and-Interpreter">Erlang Compiler and Interpreter</a>).

        <div class="defun">
            &mdash; Macro: <b>AC_ERLANG_SUBST_ERTS_VER</b><var><a name="index-AC_005fERLANG_005fSUBST_005fERTS_005fVER-1128"></a></var><br>
            <blockquote><p><a name="index-AC_005fERLANG_005fSUBST_005fERTS_005fVER-1129"></a>
                    <a name="index-ERLANG_005fERTS_005fVER-1130"></a>Set the output variable <code>ERLANG_ERTS_VER</code> to the version of the
                    Erlang runtime system (as returned by Erlang's
                    <code>erlang:system_info(version)</code> function).  The result of this test
                    is cached if caching is enabled when running <samp><span class="command">configure</span></samp>.  The
                    <code>ERLANG_ERTS_VER</code> variable is not intended to be used for testing
                    for features of specific ERTS versions, but to be used for substituting
                    the ERTS version in Erlang/OTP release resource files (<code>.rel</code>
                    files), as shown below. 
                </p></blockquote></div>

        <div class="defun">
            &mdash; Macro: <b>AC_ERLANG_SUBST_ROOT_DIR</b><var><a name="index-AC_005fERLANG_005fSUBST_005fROOT_005fDIR-1131"></a></var><br>
            <blockquote><p><a name="index-AC_005fERLANG_005fSUBST_005fROOT_005fDIR-1132"></a>
                    <a name="index-ERLANG_005fROOT_005fDIR-1133"></a>Set the output variable <code>ERLANG_ROOT_DIR</code> to the path to the base
                    directory in which Erlang/OTP is installed (as returned by Erlang's
                    <code>code:root_dir/0</code> function).  The result of this test is cached if
                    caching is enabled when running <samp><span class="command">configure</span></samp>. 
                </p></blockquote></div>

        <div class="defun">
            &mdash; Macro: <b>AC_ERLANG_SUBST_LIB_DIR</b><var><a name="index-AC_005fERLANG_005fSUBST_005fLIB_005fDIR-1134"></a></var><br>
            <blockquote><p><a name="index-AC_005fERLANG_005fSUBST_005fLIB_005fDIR-1135"></a>
                    <a name="index-ERLANG_005fLIB_005fDIR-1136"></a>Set the output variable <code>ERLANG_LIB_DIR</code> to the path of the library
                    directory of Erlang/OTP (as returned by Erlang's
                    <code>code:lib_dir/0</code> function), which subdirectories each contain an installed
                    Erlang/OTP library.  The result of this test is cached if caching is enabled
                    when running <samp><span class="command">configure</span></samp>. 
                </p></blockquote></div>

        <div class="defun">
            &mdash; Macro: <b>AC_ERLANG_CHECK_LIB</b> (<var>library, </var><span class="roman">[</span><var>action-if-found</var><span class="roman">]</span><var>, </var><span class="roman">[</span><var>action-if-not-found</var><span class="roman">]</span>)<var><a name="index-AC_005fERLANG_005fCHECK_005fLIB-1137"></a></var><br>
            <blockquote><p><a name="index-AC_005fERLANG_005fCHECK_005fLIB-1138"></a>
                    <a name="index-ERLANG_005fLIB_005fDIR_005f_0040var_007blibrary_007d-1139"></a><a name="index-ERLANG_005fLIB_005fVER_005f_0040var_007blibrary_007d-1140"></a>Test whether the Erlang/OTP library <var>library</var> is installed by
                    calling Erlang's <code>code:lib_dir/1</code> function.  The result of this
                    test is cached if caching is enabled when running <samp><span class="command">configure</span></samp>. 
                    <var>action-if-found</var> is a list of shell commands to run if the library
                    is installed; <var>action-if-not-found</var> is a list of shell commands to
                    run if it is not.  Additionally, if the library is installed, the output
                    variable &lsquo;<samp><span class="samp">ERLANG_LIB_DIR_</span><var>library</var></samp>&rsquo; is set to the path to the
                    library installation directory, and the output variable
                    &lsquo;<samp><span class="samp">ERLANG_LIB_VER_</span><var>library</var></samp>&rsquo; is set to the version number that is
                    part of the subdirectory name, if it is in the standard form
                    (<var>library</var><code>-</code><var>version</var>).  If the directory name does not
                    have a version part, &lsquo;<samp><span class="samp">ERLANG_LIB_VER_</span><var>library</var></samp>&rsquo; is set to the
                    empty string.  If the library is not installed,
                    &lsquo;<samp><span class="samp">ERLANG_LIB_DIR_</span><var>library</var></samp>&rsquo; and
                    &lsquo;<samp><span class="samp">ERLANG_LIB_VER_</span><var>library</var></samp>&rsquo; are set to <code>"not found"</code>.  For
                    example, to check if library <code>stdlib</code> is installed:

                <pre class="example">          AC_ERLANG_CHECK_LIB([stdlib],
            [echo "stdlib version \"$ERLANG_LIB_VER_stdlib\""
             echo "is installed in \"$ERLANG_LIB_DIR_stdlib\""],
            [AC_MSG_ERROR([stdlib was not found!])])
                </pre>
                <p>The &lsquo;<samp><span class="samp">ERLANG_LIB_VER_</span><var>library</var></samp>&rsquo; variables (set by
                    <code>AC_ERLANG_CHECK_LIB</code>) and the <code>ERLANG_ERTS_VER</code> variable (set
                    by <code>AC_ERLANG_SUBST_ERTS_VER</code>) are not intended to be used for
                    testing for features of specific versions of libraries or of the Erlang
                    runtime system.  Those variables are intended to be substituted in
                    Erlang release resource files (<code>.rel</code> files).  For instance, to
                    generate a <samp><span class="file">example.rel</span></samp> file for an application depending on the
                    <code>stdlib</code> library, <samp><span class="file">configure.ac</span></samp> could contain:

                <pre class="example">          AC_ERLANG_SUBST_ERTS_VER
          AC_ERLANG_CHECK_LIB([stdlib],
            [],
            [AC_MSG_ERROR([stdlib was not found!])])
          AC_CONFIG_FILES([example.rel])
                </pre>
                <p class="noindent">The <samp><span class="file">example.rel.in</span></samp> file used to generate <samp><span class="file">example.rel</span></samp>
                    should contain:

                <pre class="example">          {release,
              {"@PACKAGE@", "@VERSION@"},
              {erts, "@ERLANG_ERTS_VER@"},
              [{stdlib, "@ERLANG_LIB_VER_stdlib@"},
               {@PACKAGE@, "@VERSION@"}]}.
                </pre>
            </blockquote></div>

        <p>In addition to the above macros, which test installed Erlang libraries, the
            following macros determine the paths to the directories into which newly built
            Erlang libraries are to be installed:

        <div class="defun">
            &mdash; Macro: <b>AC_ERLANG_SUBST_INSTALL_LIB_DIR</b><var><a name="index-AC_005fERLANG_005fSUBST_005fINSTALL_005fLIB_005fDIR-1141"></a></var><br>
            <blockquote><p><a name="index-AC_005fERLANG_005fSUBST_005fINSTALL_005fLIB_005fDIR-1142"></a>
                    <a name="index-ERLANG_005fINSTALL_005fLIB_005fDIR-1143"></a>
                    Set the <code>ERLANG_INSTALL_LIB_DIR</code> output variable to the directory into
                    which every built Erlang library should be installed in a separate
                    subdirectory. 
                    If this variable is not set in the environment when <samp><span class="command">configure</span></samp> runs,
                    its default value is <code>${libdir}/erlang/lib</code>. 
                </p></blockquote></div>

        <div class="defun">
            &mdash; Macro: <b>AC_ERLANG_SUBST_INSTALL_LIB_SUBDIR</b> (<var>library, version</var>)<var><a name="index-AC_005fERLANG_005fSUBST_005fINSTALL_005fLIB_005fSUBDIR-1144"></a></var><br>
            <blockquote><p><a name="index-AC_005fERLANG_005fSUBST_005fINSTALL_005fLIB_005fSUBDIR-1145"></a>
                    <a name="index-ERLANG_005fINSTALL_005fLIB_005fDIR_005f_0040var_007blibrary_007d-1146"></a>
                    Set the &lsquo;<samp><span class="samp">ERLANG_INSTALL_LIB_DIR_</span><var>library</var></samp>&rsquo; output variable to the
                    directory into which the built Erlang library <var>library</var> version
                    <var>version</var> should be installed.  If this variable is not set in the
                    environment when <samp><span class="command">configure</span></samp> runs, its default value is
                    &lsquo;<samp><span class="samp">$ERLANG_INSTALL_LIB_DIR/</span><var>library</var><span class="samp">-</span><var>version</var></samp>&rsquo;, the value of the
                    <code>ERLANG_INSTALL_LIB_DIR</code> variable being set by the
                    <code>AC_ERLANG_SUBST_INSTALL_LIB_DIR</code> macro. 
                </p></blockquote></div>

        <!-- ========================================================= Writing Tests -->
    </body>
</html>
